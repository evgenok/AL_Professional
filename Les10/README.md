Домашнее задание
Пишем скрипт

Цель:
Написать скрипт на языке Bash;

Описание/Пошаговая инструкция выполнения домашнего задания:
Написать скрипт для CRON, который раз в час будет формировать письмо

Необходимая информация в письме:

Список IP адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта;
Список запрашиваемых URL (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта;
Ошибки веб-сервера/приложения c момента последнего запуска;
Список всех кодов HTTP ответа с указанием их кол-ва с момента последнего запуска скрипта.
Скрипт должен предотвращать одновременный запуск нескольких копий, до его завершения.


// итог выполнения скрипта будет выглядеть так

root@osboxes:/home/osboxes# cat new.txt 
Отчет о запросах с последнего запуска скрипта (13/Apr/2025:10:08:00):

Список IP-адресов с наибольшим количеством запросов:
     45 93.158.167.130
     39 109.236.252.130
     37 212.57.117.19
     33 188.43.241.106
     31 87.250.233.68
     24 62.75.198.172
     22 148.251.223.21
     20 185.6.8.9
     17 217.118.66.161
     16 95.165.18.146
     12 95.108.181.93
     12 62.210.252.196
     12 185.142.236.35
     12 162.243.13.195
      8 163.179.32.118

Список запрашиваемых URL:
    157 /
    120 /wp-login.php
     57 /xmlrpc.php
     26 /robots.txt
     12 /favicon.ico
     11 400
      9 /wp-includes/js/wp-embed.min.js?ver=5.0.4
      7 /wp-admin/admin-post.php?page=301bulkoptions
      7 /1
      6 /wp-content/uploads/2016/10/robo5.jpg
      6 /wp-content/uploads/2016/10/robo4.jpg
      6 /wp-content/uploads/2016/10/robo3.jpg
      6 /wp-content/uploads/2016/10/robo2.jpg
      6 /wp-content/uploads/2016/10/robo1.jpg
      6 /wp-content/uploads/2016/10/aoc-1.jpg

Ошибки веб-сервера:
     51 404
      3 500
      1 403

Все коды HTTP ответа:
    498 200
     95 301
     51 404
      7 400
      3 500
      2 499
      1 405
      1 403
      1 304

//добавил выполнение скрипта в планировщик задач ежедневно в 21 00
[root@osboxes ~]# crontab -e 
0 21 * * * /home/osboxes/log.sh